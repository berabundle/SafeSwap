{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Wallet = void 0;\nconst methods_1 = require(\"../communication/methods\");\nconst permissions_1 = require(\"../types/permissions\");\nclass Wallet {\n  constructor(communicator) {\n    this.communicator = communicator;\n  }\n  async getPermissions() {\n    const response = await this.communicator.send(methods_1.Methods.wallet_getPermissions, undefined);\n    return response.data;\n  }\n  async requestPermissions(permissions) {\n    if (!this.isPermissionRequestValid(permissions)) {\n      throw new permissions_1.PermissionsError('Permissions request is invalid', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n    try {\n      const response = await this.communicator.send(methods_1.Methods.wallet_requestPermissions, permissions);\n      return response.data;\n    } catch (_a) {\n      throw new permissions_1.PermissionsError('Permissions rejected', permissions_1.PERMISSIONS_REQUEST_REJECTED);\n    }\n  }\n  isPermissionRequestValid(permissions) {\n    return permissions.every(pr => {\n      if (typeof pr === 'object') {\n        return Object.keys(pr).every(method => {\n          if (Object.values(methods_1.RestrictedMethods).includes(method)) {\n            return true;\n          }\n          return false;\n        });\n      }\n      return false;\n    });\n  }\n}\nexports.Wallet = Wallet;","map":{"version":3,"names":["methods_1","require","permissions_1","Wallet","constructor","communicator","getPermissions","response","send","Methods","wallet_getPermissions","undefined","data","requestPermissions","permissions","isPermissionRequestValid","PermissionsError","PERMISSIONS_REQUEST_REJECTED","wallet_requestPermissions","_a","every","pr","Object","keys","method","values","RestrictedMethods","includes","exports"],"sources":["/home/oliver/Projects/SafeSwap/node_modules/@safe-global/safe-apps-sdk/src/wallet/index.ts"],"sourcesContent":["import { Methods, RestrictedMethods } from '../communication/methods';\nimport { Communicator } from '../types';\nimport { PermissionRequest, Permission, PermissionsError, PERMISSIONS_REQUEST_REJECTED } from '../types/permissions';\n\nclass Wallet {\n  private readonly communicator: Communicator;\n\n  constructor(communicator: Communicator) {\n    this.communicator = communicator;\n  }\n\n  async getPermissions(): Promise<Permission[]> {\n    const response = await this.communicator.send<Methods.wallet_getPermissions, undefined, Permission[]>(\n      Methods.wallet_getPermissions,\n      undefined,\n    );\n\n    return response.data;\n  }\n\n  async requestPermissions(permissions: PermissionRequest[]): Promise<Permission[]> {\n    if (!this.isPermissionRequestValid(permissions)) {\n      throw new PermissionsError('Permissions request is invalid', PERMISSIONS_REQUEST_REJECTED);\n    }\n\n    try {\n      const response = await this.communicator.send<\n        Methods.wallet_requestPermissions,\n        PermissionRequest[],\n        Permission[]\n      >(Methods.wallet_requestPermissions, permissions);\n\n      return response.data;\n    } catch {\n      throw new PermissionsError('Permissions rejected', PERMISSIONS_REQUEST_REJECTED);\n    }\n  }\n\n  isPermissionRequestValid(permissions: PermissionRequest[]): boolean {\n    return permissions.every((pr: PermissionRequest) => {\n      if (typeof pr === 'object') {\n        return Object.keys(pr).every((method) => {\n          if (Object.values(RestrictedMethods).includes(method as RestrictedMethods)) {\n            return true;\n          }\n\n          return false;\n        });\n      }\n\n      return false;\n    });\n  }\n}\n\nexport { Wallet };\n"],"mappings":";;;;;;AAAA,MAAAA,SAAA,GAAAC,OAAA;AAEA,MAAAC,aAAA,GAAAD,OAAA;AAEA,MAAME,MAAM;EAGVC,YAAYC,YAA0B;IACpC,IAAI,CAACA,YAAY,GAAGA,YAAY;EAClC;EAEA,MAAMC,cAAcA,CAAA;IAClB,MAAMC,QAAQ,GAAG,MAAM,IAAI,CAACF,YAAY,CAACG,IAAI,CAC3CR,SAAA,CAAAS,OAAO,CAACC,qBAAqB,EAC7BC,SAAS,CACV;IAED,OAAOJ,QAAQ,CAACK,IAAI;EACtB;EAEA,MAAMC,kBAAkBA,CAACC,WAAgC;IACvD,IAAI,CAAC,IAAI,CAACC,wBAAwB,CAACD,WAAW,CAAC,EAAE;MAC/C,MAAM,IAAIZ,aAAA,CAAAc,gBAAgB,CAAC,gCAAgC,EAAEd,aAAA,CAAAe,4BAA4B,CAAC;;IAG5F,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAM,IAAI,CAACF,YAAY,CAACG,IAAI,CAI3CR,SAAA,CAAAS,OAAO,CAACS,yBAAyB,EAAEJ,WAAW,CAAC;MAEjD,OAAOP,QAAQ,CAACK,IAAI;KACrB,CAAC,OAAAO,EAAA,EAAM;MACN,MAAM,IAAIjB,aAAA,CAAAc,gBAAgB,CAAC,sBAAsB,EAAEd,aAAA,CAAAe,4BAA4B,CAAC;;EAEpF;EAEAF,wBAAwBA,CAACD,WAAgC;IACvD,OAAOA,WAAW,CAACM,KAAK,CAAEC,EAAqB,IAAI;MACjD,IAAI,OAAOA,EAAE,KAAK,QAAQ,EAAE;QAC1B,OAAOC,MAAM,CAACC,IAAI,CAACF,EAAE,CAAC,CAACD,KAAK,CAAEI,MAAM,IAAI;UACtC,IAAIF,MAAM,CAACG,MAAM,CAACzB,SAAA,CAAA0B,iBAAiB,CAAC,CAACC,QAAQ,CAACH,MAA2B,CAAC,EAAE;YAC1E,OAAO,IAAI;;UAGb,OAAO,KAAK;QACd,CAAC,CAAC;;MAGJ,OAAO,KAAK;IACd,CAAC,CAAC;EACJ;;AAGOI,OAAA,CAAAzB,MAAA,GAAAA,MAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}