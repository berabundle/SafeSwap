{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Typography,Paper,Button,Select,MenuItem,FormControl,InputLabel,List,ListItem,ListItemAvatar,ListItemText,ListItemSecondaryAction,Avatar,IconButton,Grid,CircularProgress,Alert}from'@mui/material';import DeleteIcon from'@mui/icons-material/Delete';import SwapVertIcon from'@mui/icons-material/SwapVert';import berabundlerService from'../services/BerabundlerService';import{useSafeAppsSDK}from'@safe-global/safe-apps-react-sdk';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SwapForm=_ref=>{let{selectedTokens,availableTokens,onRemoveToken,onSwap,apiKey}=_ref;const{sdk,safe}=useSafeAppsSDK();const[targetToken,setTargetToken]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[swapQuote,setSwapQuote]=useState(null);// Set default target token to BERA if available\nuseEffect(()=>{if(!targetToken&&availableTokens.length>0){const beraToken=availableTokens.find(t=>t.symbol==='BERA'||t.isNative);if(beraToken){setTargetToken(beraToken);}else{setTargetToken(availableTokens[0]);}}},[availableTokens,targetToken]);// Initialize berabundler service\nuseEffect(()=>{if(sdk&&safe){berabundlerService.initialize(sdk,safe.chainId,apiKey||undefined);}},[sdk,safe,apiKey]);// Validate input tokens and generate swap quote\nconst generateSwapQuote=async()=>{if(!targetToken){setError('Please select a target token');return;}if(selectedTokens.length===0){setError('Please select at least one token to swap');return;}if(!berabundlerService.isInitialized()){setError('Service not initialized');return;}setLoading(true);setError(null);try{// Generate swap quote\nconst result=await berabundlerService.prepareBundleTransactions(selectedTokens,targetToken,0.5// 0.5% slippage tolerance\n);if(result.success&&result.txs){setSwapQuote({totalValueUsd:result.totalValueUsd||0,estimatedOutput:result.estimatedOutput||'0',slippage:0.5// Default slippage percentage\n});}else{setError(result.error||'Failed to generate swap quote');setSwapQuote(null);}}catch(err){console.error('Error generating swap quote:',err);setError(err.message||'Unknown error generating swap quote');setSwapQuote(null);}finally{setLoading(false);}};// Effect to regenerate quote when tokens change\nuseEffect(()=>{if(selectedTokens.length>0&&targetToken){generateSwapQuote();}else{setSwapQuote(null);}},[selectedTokens,targetToken]);// Handle target token change\nconst handleTargetTokenChange=event=>{const tokenAddress=event.target.value;const selected=availableTokens.find(token=>token.address===tokenAddress);if(selected){setTargetToken(selected);}};// Execute the swap via Safe\nconst handleSwap=async()=>{if(!targetToken||selectedTokens.length===0||!swapQuote){setError('Cannot execute swap without a valid quote');return;}setLoading(true);setError(null);try{const result=await berabundlerService.prepareBundleTransactions(selectedTokens,targetToken);if(result.success&&result.txs){// Create swap bundle for onSwap callback\nconst swapBundle={operations:[],// These are handled internally by the service\ntargetToken,totalValueUsd:swapQuote.totalValueUsd,estimatedOutput:parseFloat(swapQuote.estimatedOutput)};// Execute the transaction via Safe\nawait sdk.txs.send({txs:result.txs});// Notify parent component\nonSwap(swapBundle);// Reset state\nsetSwapQuote(null);}else{setError(result.error||'Failed to prepare transactions');}}catch(err){console.error('Swap execution failed:',err);setError(err.message||'Unknown error executing swap');}finally{setLoading(false);}};// Don't show the form if no tokens are selected\nif(selectedTokens.length===0){return null;}return/*#__PURE__*/_jsxs(Box,{mb:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Bundle Swap\"}),/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2,mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Selected Tokens to Swap\"}),/*#__PURE__*/_jsx(List,{children:selectedTokens.map(_ref2=>{let{token,amount}=_ref2;return/*#__PURE__*/_jsxs(ListItem,{divider:true,children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:token.logoURI,alt:token.symbol,children:token.symbol.charAt(0)})}),/*#__PURE__*/_jsx(ListItemText,{primary:token.symbol,secondary:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",children:[amount,\" \",token.symbol]}),token.priceUsd&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",component:\"span\",color:\"textSecondary\",sx:{ml:1},children:[\"($\",(parseFloat(amount)*token.priceUsd).toFixed(2),\")\"]})]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:()=>onRemoveToken(token.address),children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]},token.address);})}),/*#__PURE__*/_jsx(Box,{mt:3,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"target-token-label\",children:\"Target Token\"}),/*#__PURE__*/_jsx(Select,{labelId:\"target-token-label\",id:\"target-token-select\",value:(targetToken===null||targetToken===void 0?void 0:targetToken.address)||'',onChange:handleTargetTokenChange,label:\"Target Token\",children:availableTokens.map(token=>/*#__PURE__*/_jsx(MenuItem,{value:token.address,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Avatar,{src:token.logoURI,sx:{width:24,height:24,mr:1},children:token.symbol.charAt(0)}),/*#__PURE__*/_jsx(\"span\",{children:token.symbol})]})},token.address))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(SwapVertIcon,{fontSize:\"large\",color:\"primary\"})})})]})}),swapQuote&&/*#__PURE__*/_jsxs(Box,{mt:3,p:2,bgcolor:\"rgba(18, 255, 128, 0.05)\",borderRadius:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Swap Summary\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Total Value:\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",align:\"right\",children:[\"$\",swapQuote.totalValueUsd.toFixed(2)]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Estimated Output:\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",align:\"right\",children:[parseFloat(swapQuote.estimatedOutput).toFixed(6),\" \",targetToken===null||targetToken===void 0?void 0:targetToken.symbol]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Slippage Tolerance:\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",align:\"right\",children:[swapQuote.slippage,\"%\"]})})]})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:error}),/*#__PURE__*/_jsx(Box,{mt:3,display:\"flex\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",size:\"large\",onClick:handleSwap,disabled:loading||!swapQuote,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):undefined,children:loading?'Processing...':'Execute Swap Bundle'})})]})]});};export default SwapForm;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Button","Select","MenuItem","FormControl","InputLabel","List","ListItem","ListItemAvatar","ListItemText","ListItemSecondaryAction","Avatar","IconButton","Grid","CircularProgress","Alert","DeleteIcon","SwapVertIcon","berabundlerService","useSafeAppsSDK","jsx","_jsx","jsxs","_jsxs","SwapForm","_ref","selectedTokens","availableTokens","onRemoveToken","onSwap","apiKey","sdk","safe","targetToken","setTargetToken","loading","setLoading","error","setError","swapQuote","setSwapQuote","length","beraToken","find","t","symbol","isNative","initialize","chainId","undefined","generateSwapQuote","isInitialized","result","prepareBundleTransactions","success","txs","totalValueUsd","estimatedOutput","slippage","err","console","message","handleTargetTokenChange","event","tokenAddress","target","value","selected","token","address","handleSwap","swapBundle","operations","parseFloat","send","mb","children","variant","gutterBottom","sx","p","map","_ref2","amount","divider","src","logoURI","alt","charAt","primary","secondary","component","priceUsd","color","ml","toFixed","edge","onClick","mt","container","spacing","alignItems","item","xs","sm","fullWidth","id","labelId","onChange","label","display","width","height","mr","justifyContent","fontSize","bgcolor","borderRadius","align","severity","size","disabled","startIcon"],"sources":["/home/oliver/Projects/SafeSwap/src/components/SwapForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  TextField, \n  Button, \n  Select, \n  MenuItem, \n  FormControl, \n  InputLabel,\n  Divider,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListItemSecondaryAction,\n  Avatar,\n  IconButton,\n  Chip,\n  Grid,\n  Stack,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport SwapVertIcon from '@mui/icons-material/SwapVert';\nimport { ethers } from 'ethers';\n\nimport { Token, TokenAmount, SwapBundle } from '../types';\nimport berabundlerService from '../services/BerabundlerService';\nimport { useSafeAppsSDK } from '@safe-global/safe-apps-react-sdk';\n\ninterface SwapFormProps {\n  selectedTokens: TokenAmount[];\n  availableTokens: Token[];\n  onRemoveToken: (tokenAddress: string) => void;\n  onSwap: (swapBundle: SwapBundle) => void;\n  apiKey: string | null;\n}\n\nconst SwapForm: React.FC<SwapFormProps> = ({ \n  selectedTokens, \n  availableTokens, \n  onRemoveToken, \n  onSwap,\n  apiKey\n}) => {\n  const { sdk, safe } = useSafeAppsSDK();\n  const [targetToken, setTargetToken] = useState<Token | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [swapQuote, setSwapQuote] = useState<{\n    totalValueUsd: number;\n    estimatedOutput: string;\n    slippage: number;\n  } | null>(null);\n\n  // Set default target token to BERA if available\n  useEffect(() => {\n    if (!targetToken && availableTokens.length > 0) {\n      const beraToken = availableTokens.find(t => t.symbol === 'BERA' || t.isNative);\n      if (beraToken) {\n        setTargetToken(beraToken);\n      } else {\n        setTargetToken(availableTokens[0]);\n      }\n    }\n  }, [availableTokens, targetToken]);\n\n  // Initialize berabundler service\n  useEffect(() => {\n    if (sdk && safe) {\n      berabundlerService.initialize(sdk, safe.chainId, apiKey || undefined);\n    }\n  }, [sdk, safe, apiKey]);\n\n  // Validate input tokens and generate swap quote\n  const generateSwapQuote = async () => {\n    if (!targetToken) {\n      setError('Please select a target token');\n      return;\n    }\n\n    if (selectedTokens.length === 0) {\n      setError('Please select at least one token to swap');\n      return;\n    }\n\n    if (!berabundlerService.isInitialized()) {\n      setError('Service not initialized');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Generate swap quote\n      const result = await berabundlerService.prepareBundleTransactions(\n        selectedTokens,\n        targetToken,\n        0.5 // 0.5% slippage tolerance\n      );\n\n      if (result.success && result.txs) {\n        setSwapQuote({\n          totalValueUsd: result.totalValueUsd || 0,\n          estimatedOutput: result.estimatedOutput || '0',\n          slippage: 0.5 // Default slippage percentage\n        });\n      } else {\n        setError(result.error || 'Failed to generate swap quote');\n        setSwapQuote(null);\n      }\n    } catch (err: any) {\n      console.error('Error generating swap quote:', err);\n      setError(err.message || 'Unknown error generating swap quote');\n      setSwapQuote(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Effect to regenerate quote when tokens change\n  useEffect(() => {\n    if (selectedTokens.length > 0 && targetToken) {\n      generateSwapQuote();\n    } else {\n      setSwapQuote(null);\n    }\n  }, [selectedTokens, targetToken]);\n\n  // Handle target token change\n  const handleTargetTokenChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const tokenAddress = event.target.value as string;\n    const selected = availableTokens.find(token => token.address === tokenAddress);\n    if (selected) {\n      setTargetToken(selected);\n    }\n  };\n\n  // Execute the swap via Safe\n  const handleSwap = async () => {\n    if (!targetToken || selectedTokens.length === 0 || !swapQuote) {\n      setError('Cannot execute swap without a valid quote');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await berabundlerService.prepareBundleTransactions(\n        selectedTokens,\n        targetToken\n      );\n\n      if (result.success && result.txs) {\n        // Create swap bundle for onSwap callback\n        const swapBundle: SwapBundle = {\n          operations: [], // These are handled internally by the service\n          targetToken,\n          totalValueUsd: swapQuote.totalValueUsd,\n          estimatedOutput: parseFloat(swapQuote.estimatedOutput)\n        };\n\n        // Execute the transaction via Safe\n        await sdk.txs.send({ txs: result.txs });\n        \n        // Notify parent component\n        onSwap(swapBundle);\n        \n        // Reset state\n        setSwapQuote(null);\n      } else {\n        setError(result.error || 'Failed to prepare transactions');\n      }\n    } catch (err: any) {\n      console.error('Swap execution failed:', err);\n      setError(err.message || 'Unknown error executing swap');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Don't show the form if no tokens are selected\n  if (selectedTokens.length === 0) {\n    return null;\n  }\n\n  return (\n    <Box mb={4}>\n      <Typography variant=\"h6\" gutterBottom>\n        Bundle Swap\n      </Typography>\n      \n\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 3 }}>\n        <Typography variant=\"subtitle2\" gutterBottom>\n          Selected Tokens to Swap\n        </Typography>\n        \n        <List>\n          {selectedTokens.map(({ token, amount }) => (\n            <ListItem key={token.address} divider>\n              <ListItemAvatar>\n                <Avatar src={token.logoURI} alt={token.symbol}>\n                  {token.symbol.charAt(0)}\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText\n                primary={token.symbol}\n                secondary={\n                  <Box>\n                    <Typography variant=\"body2\" component=\"span\">\n                      {amount} {token.symbol}\n                    </Typography>\n                    {token.priceUsd && (\n                      <Typography variant=\"body2\" component=\"span\" color=\"textSecondary\" sx={{ ml: 1 }}>\n                        (${(parseFloat(amount) * token.priceUsd).toFixed(2)})\n                      </Typography>\n                    )}\n                  </Box>\n                }\n              />\n              <ListItemSecondaryAction>\n                <IconButton \n                  edge=\"end\" \n                  aria-label=\"delete\"\n                  onClick={() => onRemoveToken(token.address)}\n                >\n                  <DeleteIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n          ))}\n        </List>\n\n        <Box mt={3}>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} sm={6}>\n              <FormControl fullWidth variant=\"outlined\">\n                <InputLabel id=\"target-token-label\">Target Token</InputLabel>\n                <Select\n                  labelId=\"target-token-label\"\n                  id=\"target-token-select\"\n                  value={targetToken?.address || ''}\n                  onChange={handleTargetTokenChange as any}\n                  label=\"Target Token\"\n                >\n                  {availableTokens.map(token => (\n                    <MenuItem key={token.address} value={token.address}>\n                      <Box display=\"flex\" alignItems=\"center\">\n                        <Avatar \n                          src={token.logoURI} \n                          sx={{ width: 24, height: 24, mr: 1 }}\n                        >\n                          {token.symbol.charAt(0)}\n                        </Avatar>\n                        <span>{token.symbol}</span>\n                      </Box>\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            \n            <Grid item xs={12} sm={6}>\n              <Box display=\"flex\" justifyContent=\"center\">\n                <SwapVertIcon fontSize=\"large\" color=\"primary\" />\n              </Box>\n            </Grid>\n          </Grid>\n        </Box>\n\n        {/* Swap Quote Section */}\n        {swapQuote && (\n          <Box mt={3} p={2} bgcolor=\"rgba(18, 255, 128, 0.05)\" borderRadius={1}>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              Swap Summary\n            </Typography>\n            \n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Total Value:\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" align=\"right\">\n                  ${swapQuote.totalValueUsd.toFixed(2)}\n                </Typography>\n              </Grid>\n              \n              <Grid item xs={6}>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Estimated Output:\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" align=\"right\">\n                  {parseFloat(swapQuote.estimatedOutput).toFixed(6)} {targetToken?.symbol}\n                </Typography>\n              </Grid>\n              \n              <Grid item xs={6}>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Slippage Tolerance:\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" align=\"right\">\n                  {swapQuote.slippage}%\n                </Typography>\n              </Grid>\n            </Grid>\n          </Box>\n        )}\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Box mt={3} display=\"flex\" justifyContent=\"center\">\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            onClick={handleSwap}\n            disabled={loading || !swapQuote}\n            startIcon={loading ? <CircularProgress size={20} /> : undefined}\n          >\n            {loading ? 'Processing...' : 'Execute Swap Bundle'}\n          </Button>\n        </Box>\n      </Paper>\n    </Box>\n  );\n};\n\nexport default SwapForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}